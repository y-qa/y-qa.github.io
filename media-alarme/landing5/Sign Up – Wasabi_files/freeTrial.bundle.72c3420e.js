webpackJsonp([24],{354:function(e,a,i){"use strict";(function(e){var a=function(){return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,a){var i=[],r=!0,l=!1,s=void 0;try{for(var t,o=e[Symbol.iterator]();!(r=(t=o.next()).done)&&(i.push(t.value),!a||i.length!==a);r=!0);}catch(e){l=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(l)throw s}}return i}(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.wasabi.pages.freeTrial={init:function(){e(".js-mandrill-signup").length&&this.util.onMandrillLoad()},bindEvents:function(){e("#other").click(function(){e("#other_text").toggleClass("hidden")})},util:{isValidEmailAddress:function(e){return new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(e)},isValidOfferCode:function(e){var a=0;if(0==wasabi_wp.offer_codes||""===e)a=1;else for(var i=0;i<wasabi_wp.offer_codes.length;i++)e===wasabi_wp.offer_codes[i].toLowerCase()&&(a=1);return a},onMandrillLoad:function(){document.getElementById("trial_submit").onclick=window.wasabi.pages.freeTrial.util.mandrillValidate},mandrillValidate:function(i){i.preventDefault();var r=e.trim(e("#trial_email").val()),l=e("#signup-modal").find("#trial_first_name").val(),s=e("#signup-modal").find("#trial_last_name").val(),t=e("#signup-modal").find("#trial_company").val(),o=e("#signup-modal").find("#trial_country").val(),n=e("#signup-modal").find("#trial_phone").val(),u=e("#signup-modal").find("#trial_storage").children("option:selected").val(),f=e("#signup-modal").find("#trial_offer_code").val().toLowerCase(),w=e("#signup-modal").find("#gclid_field").val(),d=e("#signup-modal").find("#other_text").val(),m=e(".trial_msg"),p=e("#signup-modal").find("#sign_up_browser").val(),c=e("#signup-modal").find("#sign_up_device").val(),g=e("#signup-modal").find("#free_trial_sign_up_source").val(),b="",h=!1;void 0!==(b=e('.modal__referral input[type="checkbox"]:checked').map(function(){return this.value}).get())&&0!=b.length&&(b=b.join(";")),e(".modal__reselling").find("input").is(":checked")&&(h=!0),m.html(""),m.hide();var _=!1;if(window.blackList.length>0&&window.blackList.forEach(function(e){r.includes(e)&&(_=!0)}),window.exceptions.length>0&&window.exceptions.forEach(function(e){r===e&&(_=!1)}),window.wasabi.pages.freeTrial.util.isValidEmailAddress(r))if(l&&s&&u&&o)if(window.wasabi.pages.freeTrial.util.isValidOfferCode(f))if(""==grecaptcha.getResponse())m.html("The recaptcha is required"),m.show();else if(_)m.html("Oh no! It appears there was a problem with your submission, please contact support@wasabi.com for more information."),m.show();else{window.wasabi.pages.freeTrial.util.formValues={email:r,firstName:l,lastName:s,company:t,country:o,phone:n,storageAmount:u,offerCode:f,referrals:b,referralsOther:d,interestInReselling:h,gclidField:w,partner_source:g,sign_up_browser:p,sign_up_device:c},wasabi.pages.freeTrial.util.onMandrillSubmit(grecaptcha.getResponse());var v=Object.entries(window.wasabi.pages.freeTrial.util.formValues),T=new FormData,V=window.location.origin+"/wp-json/contact-form-7/v1/contact-forms/"+window.backupForm+"/feedback";if(void 0!==window.backupForm){var y=!0,k=!1,E=void 0;try{for(var S,x=v[Symbol.iterator]();!(y=(S=x.next()).done);y=!0){var A=S.value,C=a(A,2),L=C[0],M=C[1];T.append(L,M)}}catch(e){k=!0,E=e}finally{try{!y&&x.return&&x.return()}finally{if(k)throw E}}var O=new XMLHttpRequest;O.onreadystatechange=function(){console.log("CF7 BU",O.readyState,O.status),O.readyState},O.open("POST",V),O.send(T)}}else m.html("Your offer code is invalid. Please enter a valid offer code."),m.show();else m.html("Please fill in the required fields"),m.show();else m.html("Please enter a valid email address"),m.show()},onMandrillSubmit:function(a){window.wasabi.pages.freeTrial.util.formValues.email,window.wasabi.pages.freeTrial.util.formValues.firstName,window.wasabi.pages.freeTrial.util.formValues.lastName,window.wasabi.pages.freeTrial.util.formValues.company,window.wasabi.pages.freeTrial.util.formValues.country,window.wasabi.pages.freeTrial.util.formValues.phone,window.wasabi.pages.freeTrial.util.formValues.storageAmount,window.wasabi.pages.freeTrial.util.formValues.offerCode,window.wasabi.pages.freeTrial.util.formValues.referrals,window.wasabi.pages.freeTrial.util.formValues.referralsOther,window.wasabi.pages.freeTrial.util.formValues.interestInReselling,window.wasabi.pages.freeTrial.util.formValues.gclidField,window.wasabi.pages.freeTrial.util.formValues.partner_source,window.wasabi.pages.freeTrial.util.formValues.sign_up_browser,window.wasabi.pages.freeTrial.util.formValues.sign_up_device;MandrillEmail.get({email:window.wasabi.pages.freeTrial.util.formValues.email,inviteSource:window.wasabi.pages.freeTrial.util.formValues.partner_source}).onSuccess(function(a){""===a.Msg?e(".trial_msg").html("Thanks for signing up for a free trial. Please check your email for a confirmation link."):a.Msg&&e(".trial_msg").html(a.Msg),e(".trial_msg").show(),e(".js-trial-modal-content-inner").fadeOut(),e(".js-trial-modal-content-success").fadeIn().css("display","inline-block"),"There was an error sending invite email."!==a.Msg&&("function"==typeof ga&&ga("send","event","free trial","submitted","start your free trial"),window.wasabi.util.firePixels(['<script src="https://secure.adnxs.com/px?id=852422&t=1" type="text/javascript"><\/script>','<img style="display:none" src="https://secimg.vmmpxl.com/?bkt=66501" height="1" width="1">']),void 0!==window.dataLayer&&window.dataLayer.push({event:"tryFreeFormSubmit"})),window.wasabi.pages.freeTrial.util.onHubspotSubmit(),window.wasabi.pages.freeTrial.util.formValues=null}).onError(function(e){window.wasabi.pages.freeTrial.util.formValues=null})},onHubspotLoad:function(){document.getElementById("subscription_submit").onclick=window.wasabi.pages.freeTrial.util.hubspotValidate},hubspotValidate:function(a){a.preventDefault();var i=e.trim(e("#contact .subscribe #email").val()),r=e("#hubspot_msg");r.html(""),r.hide(),window.wasabi.pages.freeTrial.util.isValidEmailAddress(i)?(window.wasabi.pages.freeTrial.util.formValues={email:i,firstName:null,lastName:null,offerCode:null},""==grecaptcha.getResponse()&&(r.html("The recaptcha is required"),r.show())):(r.html("Please enter a valid email address"),r.show())},onHubspotSubmit:function(e){var a=window.wasabi.pages.freeTrial.util.formValues.email,i=window.wasabi.pages.freeTrial.util.formValues.firstName,r=window.wasabi.pages.freeTrial.util.formValues.lastName,l=window.wasabi.pages.freeTrial.util.formValues.company,s=window.wasabi.pages.freeTrial.util.formValues.country,t=window.wasabi.pages.freeTrial.util.formValues.phone,o=window.wasabi.pages.freeTrial.util.formValues.storageAmount,n=window.wasabi.pages.freeTrial.util.formValues.offerCode,u=window.wasabi.pages.freeTrial.util.formValues.referrals,f=window.wasabi.pages.freeTrial.util.formValues.referralsOther,w=window.wasabi.pages.freeTrial.util.formValues.interestInReselling,d=window.wasabi.pages.freeTrial.util.formValues.gclidField,m=window.wasabi.pages.freeTrial.util.formValues.partner_source,p=window.wasabi.pages.freeTrial.util.formValues.sign_up_browser,c=window.wasabi.pages.freeTrial.util.formValues.sign_up_device;HubspotEmail.get({first_name:i,last_name:r,company:l,email:a,country:s,phone:t,amount_of_storage:o,website_referral_source:u,website_referral_other:f,interest_in_reselling:w,offer_code:n,gclid_field:d,partner_source:m,sign_up_browser:p,sign_up_device:c}).onSuccess(function(e){window.wasabi.pages.freeTrial.util.formValues=null}).onError(function(e){window.wasabi.pages.freeTrial.util.formValues=null})}}}}).call(a,i(2))}},[354]);